@{
    ViewBag.Title = "Product";
    var list = ViewData["list"] as IVV.Website.ClassLib.PageList<IVV.Website.DataModel.Product>;

    var allCate = ViewData["allCateList"] as HashSet<IVV.Website.DataModel.ProductCategory>;
}


<h2>Product</h2>

@using(Html.BeginForm()) {
    @Html.TextBox("arcTitle")
    <input type="submit" value="查询" />
}

<table>
    <tr>
        <th>
            名称
        </th>
        <th>
            类别
        </th>
        <th>
            子类
        </th>
        <th>
            颜色
        </th>
        
        <th>
            产品图
        </th>
        <th></th>
    </tr>

@foreach (var item in list) {
    <tr>
        <td>
            @Html.DisplayFor(modelItem => item.Name)
        </td>
        <td>
            @allCate.SingleOrDefault(t=>t.Id == item.CategoryId).Name
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.SubCategory)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.Color)
        </td>
        
        <td>
            <img src="@item.ImgUrl" style="width:100px;" />
        </td>
        <td>
            @Html.ActionLink("Edit", "EditProduct", new { id=item.Id }) |
            @Html.ActionLink("Delete", "DelProduct", new { id=item.Id })
        </td>
    </tr>
}

</table>

@{
var pars = new Dictionary<string, object>();
        
    Html.RenderPager("_PageBar", list.Count, 10, (int)ViewData["pageIndex"], "/admin/product", pars);
}

<p>
    @Html.ActionLink("Create New", "Create")
</p>